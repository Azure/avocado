parameters:
  - name: version
    type: string

steps:
  - task: NodeTool@0
    displayName: 'Install Node'
    inputs:
      versionSpec: ${{ parameters.version }}

  - script: npm ci
    displayName: 'npm ci'

  - script: npm ls -a
    displayName: 'npm ls -a'
    condition: succeededOrFailed()
    continueOnError: true

  - script: npm run build
    displayName: 'npm run build'

  - script: npm run lint
    displayName: 'npm run lint'

  - script: npm run format:check:ci
    displayName: 'npm run format:check:ci'

  - script: npm run test:ci
    displayName: 'npm run test:ci'
